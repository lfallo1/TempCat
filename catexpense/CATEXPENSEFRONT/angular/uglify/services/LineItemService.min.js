"use strict";angular.module("expenseApp.Services").service("LineItemService",["$http",function(a){function b(){var a="Miles:"+k.miles+",Origin:"+k.origin+",Destination:"+k.destination+",Sunday:"+k.days.sunday+",Monday:"+k.days.monday+",Tuesday:"+k.days.tuesday+",Wednesday:"+k.days.wednesday+",Thursday:"+k.days.thursday+",Friday:"+k.days.friday+",Saturday:"+k.days.saturday;j.LineItemMetadata=a}function c(a){var b=new Date(a);b.setDate(a.getDate()-a.getDay());var c=new Date(b);c.setDate(b.getDate()+1);var d=new Date(b);d.setDate(b.getDate()+2);var e=new Date(b);e.setDate(b.getDate()+3);var f=new Date(b);f.setDate(b.getDate()+4);var g=new Date(b);g.setDate(b.getDate()+5);var h=new Date(b);h.setDate(b.getDate()+6);var i={sunday:b,monday:c,tuesday:d,wednesday:e,thursday:f,friday:g,saturday:h};return i}function d(){var a=j.LineItemMetadata.split(","),b=a[0].split(":");return b[1]}function e(){var a=j.LineItemMetadata.split(","),b=a[1].split(":");return b[1]}function f(){var a=j.LineItemMetadata.split(","),b=a[2].split(":");return b[1]}function g(){var a=j.LineItemMetadata.split(","),b=a[3].split(":");return k.days.sunday="true"===b[1],b=a[4].split(":"),k.days.monday="true"===b[1],b=a[5].split(":"),k.days.tuesday="true"===b[1],b=a[6].split(":"),k.days.wednesday="true"===b[1],b=a[7].split(":"),k.days.thursday="true"===b[1],b=a[8].split(":"),k.days.friday="true"===b[1],b=a[9].split(":"),k.days.saturday="true"===b[1],k.days}var h=this,i=!1,j={LineItemId:"",SubmissionId:"",Billable:!1,ExpenseCategoryId:1,LineItemDate:"",LineItemDesc:"",LineItemAmount:0,LineItemMetadata:"Miles:0,Origin:,Destination:,Sunday:false,Monday:false,Tuesday:false,Wednesday:false,Thursday:false,Friday:false,Saturday:false",ReceiptPresent:!1,StatusId:1,ManagerApproverDate:null,FinanceApproverDate:null},k={expenseCategoryName:"Mileage",endingWeek:"",origin:"",destination:"",miles:0,days:{sunday:!1,monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1},daysString:{sunday:"",monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:""},valid:!1};h.getUnderEdit=function(){return i},h.setUnderEdit=function(a){i=!!a},h.getLineItemId=function(){return j.LineItemId},h.setLineItemId=function(a){j.LineItemId=isNaN(parseInt(a))?"":a},h.getSubmissionId=function(){return j.SubmissionId},h.setSubmissionId=function(a){j.SubmissionId=isNaN(parseInt(a))?"":a},h.getBillable=function(){return j.Billable},h.setBillable=function(a){j.Billable=!!a},h.getExpenseCategoryId=function(){return j.ExpenseCategoryId},h.setExpenseCategoryId=function(a){j.ExpenseCategoryId=!isNaN(parseInt(a))&&a>=1&&9>=a?a:0},h.getLineItemDate=function(){return j.LineItemDate},h.setLineItemDate=function(a){var b=new Date(a);j.LineItemDate=b instanceof Date&&!isNaN(b.valueOf())?b:""},h.getLineItemDesc=function(){return j.LineItemDesc},h.setLineItemDesc=function(a){j.LineItemDesc=a},h.getLineItemAmount=function(){return j.LineItemAmount},h.setLineItemAmount=function(a){j.LineItemAmount=!isNaN(parseInt(a))&&a>0?a:0},h.getLineItemMetadata=function(){return j.LineItemMetadata},h.getReceiptPresent=function(){return j.ReceiptPresent},h.setReceiptPresent=function(a){j.ReceiptPresent=!!a},h.getStatusId=function(){return j.StatusId},h.setStatusId=function(a){j.StatusId=!isNaN(parseInt(a))&&a>=1&&6>=a&&a%1===0?a:0},h.getExpenseCategoryName=function(){return k.expenseCategoryName},h.setExpenseCategoryName=function(a){switch(a){case"Mileage":k.expenseCategoryName="Mileage",j.ExpenseCategoryId=1;break;case"Per Diem":k.expenseCategoryName="Per Diem",j.ExpenseCategoryId=2;break;case"Transportation":k.expenseCategoryName="Transportation",j.ExpenseCategoryId=3;break;case"Lodging":k.expenseCategoryName="Lodging",j.ExpenseCategoryId=4;break;case"Parking":k.expenseCategoryName="Parking",j.ExpenseCategoryId=5;break;case"Entertainment":k.expenseCategoryName="Entertainment",j.ExpenseCategoryId=6;break;case"Meals":k.expenseCategoryName="Meals",j.ExpenseCategoryId=7;break;case"Airfare":k.expenseCategoryName="Airfare",j.ExpenseCategoryId=8;break;case"Other":k.expenseCategoryName="Other",j.ExpenseCategoryId=9;break;default:k.expenseCategoryName="",j.ExpenseCategoryId=0}},h.getEndingWeek=function(){return k.endingWeek},h.setEndingWeek=function(a){var b=new Date(a);b instanceof Date&&!isNaN(b.valueOf())?(k.endingWeek=b,k.daysString=c(b),j.LineItemDate=b):(k.endingWeek="",k.daysString={sunday:"",monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:""},j.LineItemDate="")},h.getOrigin=function(){return e()},h.setOrigin=function(a){k.origin=a,b()},h.getDestination=function(){return f()},h.setDestination=function(a){k.destination=a,b()},h.getMiles=function(){return parseFloat(d())},h.setMiles=function(a){k.miles=!isNaN(parseInt(a))&&a>=0?a:0,b()},h.getDays=function(){return g()},h.setDays=function(a){"undefined"!=typeof a&&null!==a&&a.hasOwnProperty("sunday")&&a.hasOwnProperty("monday")&&a.hasOwnProperty("tuesday")&&a.hasOwnProperty("wednesday")&&a.hasOwnProperty("thursday")&&a.hasOwnProperty("friday")&&a.hasOwnProperty("saturday")?(k.days.sunday=!!a.sunday,k.days.monday=!!a.monday,k.days.tuesday=!!a.tuesday,k.days.wednesday=!!a.wednesday,k.days.thursday=!!a.thursday,k.days.friday=!!a.friday,k.days.saturday=!!a.saturday):k.days={sunday:!1,monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1},b()},h.isLineItemValid=function(){return k.valid},h.setValidity=function(a){k.valid=!!a},h.getDaysString=function(){return k.daysString},h.getLineItem=function(){return j},h.getExtraData=function(){return k},h.resetLineItem=function(){h.setLineItemDate(""),h.setOrigin(""),h.setDestination(""),h.setMiles(0),h.setLineItemDesc(""),h.setDays({sunday:!1,monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1}),h.setLineItemAmount(0),h.setBillable(!1),h.setValidity(!1)},h.getExpenseCategoryNameById=function(a){var b="";switch(a){case 1:b="Mileage";break;case 2:b="Per Diem";break;case 3:b="Transportation";break;case 4:b="Lodging";break;case 5:b="Parking";break;case 6:b="Entertainment";break;case 7:b="Meals";break;case 8:b="Airfare";break;case 9:b="Other";break;default:b=""}return b},h.getLineItemById=function(b){return a({url:"/api/LineItem",method:"GET",params:{id:b}})},h.getLineItemsBySubmissionId=function(b){return a({url:"/api/LineItem/GetLineItemsBySubmissionId",method:"GET",params:{id:b}})},h.submitLineItem=function(b){return a({url:"/api/LineItem",method:"POST",data:b})},h.updateLineItem=function(b,c){return a({url:"/api/LineItem",method:"PUT",params:{id:b},data:c})},h.deleteLineItem=function(b){return a({url:"/api/LineItem",method:"DELETE",params:{id:b}})}}]);