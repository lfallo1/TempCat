"use strict";angular.module("expenseApp.Services",[]),angular.module("expenseApp.Controllers",[]),angular.module("expenseApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","expenseApp.Services","expenseApp.Controllers"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"Views/HotTowel/views/home.html",controller:"HomeController"}).when("/login",{title:"Login",templateUrl:"Views/HotTowel/views/login.html",controller:"LoginController"}).when("/logout",{title:"Logout",templateUrl:"Views/HotTowel/views/login.html",controller:"LogoutController"}).when("/navbar",{templateUrl:"views/navbar.html",controller:"NavController"}).when("/home",{title:"Home",templateUrl:"Views/HotTowel/views/home.html",controller:"HomeController"}).when("/EmployeeTable",{templateUrl:"Views/HotTowel/views/EmployeeTable.html",controller:"EmployeeTableController"}).when("/ManagerTable",{templateUrl:"Views/HotTowel/views/ManagerTable.html",controller:"ManagerTableController"}).when("/submission",{title:"Submission Page",templateUrl:"Views/HotTowel/views/submissionPage.html",controller:"SubmissionCtrl"}).otherwise({redirectTo:"/home"})}]).run(["$rootScope","$location","Authentication","$route","Application","RouteFilter","LoginService","SubmissionService",function(a,b,c,d,e,f,g){b.path("/login"),null!==c.getUser()&&e.makeReady(),g.isLoggedIn().then(function(d){d.data.isLoggedIn?(c.login(d.data),e.makeReady(),a.$broadcast("refresh"),b.path("/home")):(c.logout(),e.logout(),b.path("/login"),g.userLogout())}),a.$on("$locationChangeStart",function(){"/login"!==b.path()&&(e.isReady()||g.isLoggedIn().then(function(d){d.data.isLoggedIn?(c.login(d.data),e.makeReady(),a.$broadcast("refresh")):(c.logout(),e.logout(),b.path("/login"),g.userLogout())}),("/login"==b.path()||"/home"==b.path()||"/logout"==b.path())&&e.setSubmission(void 0),f.run(b.path()))}),a.$on("$routeChangeSuccess",function(b,c){a.title=c.title})}]);
"use strict";angular.module("expenseApp.Controllers").controller("DatepickerCtrl",["$scope",function(a){a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.disabled=function(a,b){return"day"===b&&!(6===a.getDay())},a.formatDate=function(){var b=["January","February","March","April","May","June","July","August","September","October","November","December"];if(a.dt1 instanceof Date&&!isNaN(a.dt1.valueOf())){var c=("0"+a.dt1.getDate()).slice(-2)+"-"+b[a.dt1.getMonth()]+"-"+a.dt1.getFullYear();return c}},a.toggleMin=function(){var b=new Date;a.minDate=b.setDate((new Date).getDate()-30)},a.toggleMin(),a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.dateOptions={formatYear:"yy",startingDay:1},a.formats=["dd-MMMM-yyyy","EEEE - MMM. dd/yyyy","dd.MM.yyyy","shortDate"],a.format=a.formats[1]}]);
"use strict";angular.module("expenseApp.Controllers").controller("EmployeeTableController",["$scope","$location","$modal","$route","$rootScope","$filter","Application","SubmissionService","MessageService","ReceiptService",function(a,b,c,d,e,f,g,h,i,j){var k=[];a.statuses=[{name:"All",value:"0"},{name:"In Progress",value:"1"},{name:"Submitted",value:"2"},{name:"Manager Approved",value:"3"},{name:"Manager Rejected",value:"4"},{name:"Finance Approved",value:"5"},{name:"Finance Rejected",value:"6"}],a.expanded=!0;var l=f("orderBy"),m={field:"DateCreated",reverse:!1};a.expandContract=function(b){a.expanded=b},a.employeeOrder=function(b){b===m.field?(m.reverse=!m.reverse,a.employeeSubmissions=l(a.employeeSubmissions,m.field,m.reverse)):(m.field=b,m.reverse=!1,a.employeeSubmissions=l(a.employeeSubmissions,m.field,m.reverse))},a.selectedStatus=a.statuses[0],a.loadEmployeeTable=function(){if(void 0!=g.getAllUserSubmissions()){var b=0,c=g.getAllUserSubmissions();a.employeeSubmissions=g.getAllUserSubmissions();for(var d=0;d<c.length;d++){for(var f=[],i=0;i<c[d].LineItems.length;i++)for(var j=0;j<c[d].LineItems[i].Receipts.length;j++)f.push(c[d].LineItems[i].Receipts[j]);c[d].allSubmissionReceipts=f}k=a.employeeSubmissions;for(var d=0;d<a.employeeSubmissions.length;d++)(4==a.employeeSubmissions[d].StatusId||6==a.employeeSubmissions[d].StatusId)&&b++;e.$broadcast("employeeTotal",b)}else h.getSubmissionsByUsername().then(function(b){for(var c=0,d=b.data,f=0;f<d.length;f++){(4==d[f].StatusId||6==d[f].StatusId)&&c++;for(var h=[],i=0;i<d[f].LineItems.length;i++)for(var j=0;j<d[f].LineItems[i].Receipts.length;j++)h.push(d[f].LineItems[i].Receipts[j]);d[f].allSubmissionReceipts=h,d[f].ReceiptPresent=h.length>0?!0:!1}g.setAllUserSubmissions(d),a.employeeSubmissions=g.getAllUserSubmissions(),e.$broadcast("employeeTotal",c),k=a.employeeSubmissions})},a.loadEmployeeTable(),a.loadEmployeeTableStatusX=function(b){for(var c=[],d=0;d<k.length;d++)(k[d].StatusId==b||0==b)&&c.push(k[d]);a.employeeSubmissions=c},a.loadEmployeeSubmission=function(c,d){a.dt1="",g.setSubmission(c),g.setSubmissionStatus(c.Status.StatusId),g.setOrigin("EmployeeTable"),g.setSubmissionIndex(d),j.setAllReceipts(c.allSubmissionReceipts),b.path("/submission")},a.deleteSubmission=function(b,d){g.setSubmissionIndex(d),i.setMessage("Are you sure you want to delete this submission?"),i.setBroadCastMessage("confirmDeleteSubmission"),i.setId(b.SubmissionId);c.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController",resolve:{selectedType:function(){return a.selectedType}}})},a.showAllAvailableReceipts=function(a,b,d){j.setReceipts(a),j.setShowAllReceipts(!0),g.setSubmission(b),g.setSubmissionIndex(d),j.setAddReceipt(!1);c.open({templateUrl:"Views/HotTowel/views/modals/receiptModal.html",controller:"receiptController"})},a.$on("confirmDeleteSubmission",function(){i.setMessage(""),i.setBroadCastMessage(""),h.deleteExpenseReport(i.getId()).then(function(){a.employeeSubmissions.splice(g.getSubmissionIndex(),1),g.setAllUserSubmissions(a.employeeSubmissions)},function(){})}),a.$on("addSubmissionEmployeeTable",function(){a.employeeSubmissions=g.getAllUserSubmissions()})}]);
"use strict";angular.module("expenseApp.Controllers").controller("FinanceTableController",["$scope","$location","$modal","$route","$rootScope","$filter","Application","SubmissionService","MessageService","Authentication","ReceiptService",function(a,b,c,d,e,f,g,h,i,j,k){var l=f("orderBy"),m={field:"TotalAmount",reverse:!1};a.isFinanceApprover=j.getIsFinanceApprover(),a.expanded=!0,a.expandContract=function(b){a.expanded=b},a.financeOrder=function(b){b===m.field?(m.reverse=!m.reverse,a.financeSubmissions=l(a.financeSubmissions,m.field,m.reverse)):(m.field=b,m.reverse=!1,a.financeSubmissions=l(a.financeSubmissions,m.field,m.reverse))},a.financeStatuses=[{name:"All",value:"0"},{name:"Manager Approved",value:"3"}],a.selectedFinanceStatus=a.financeStatuses[1];var n=[];j.getIsFinanceApprover()&&o();var o=function(){void 0!=g.getPendingSubmissionsByFinanceApprover()&&0!=g.getPendingSubmissionsByFinanceApprover().length?(a.financeSubmissions=g.getPendingSubmissionsByFinanceApprover(),n=a.financeSubmissions,e.$broadcast("financeTotal",a.financeSubmissions.length)):h.getPendingSubmissionsByFinanceApprover().then(function(b){b.data.length>0&&g.setPendingSubmissionsByFinanceApprover(b.data),a.financeSubmissions=b.data,n=a.financeSubmissions,a.loadFinanceTableStatusX(3),e.$broadcast("financeTotal",a.financeSubmissions.length)})};a.loadFinanceTableStatusX=function(b){for(var c=[],d=0;d<n.length;d++)(n[d].StatusId==b||0==b)&&c.push(n[d]);0!=c.length&&(a.financeSubmissions=c)},a.loadFinaceSubmission=function(a,c){g.setSubmission(a),g.setSubmissionStatus(a.Status.StatusId),g.setOrigin("FinanceTable"),g.setSubmissionIndex(c);for(var d=[],e=0;e<a.LineItems.length;e++)for(var f=0;f<a.LineItems[e].Receipts.length;f++)d.push(a.LineItems[e].Receipts[f]);k.setAllReceipts(d),b.path("/submission")},a.deleteSubmission=function(b,d){g.setSubmissionIndex(d),i.setMessage("Are you sure you want to delete this submission?"),i.setBroadCastMessage("confirmFinanceDeleteSubmission"),i.setId(b.SubmissionId);c.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController",resolve:{selectedType:function(){return a.selectedType}}})},a.$on("confirmFinanceDeleteSubmission",function(){i.setMessage(""),i.setBroadCastMessage(""),h.deleteExpenseReport(i.getId()).then(function(){a.financeSubmissions.splice(g.getSubmissionIndex(),1),g.setPendingSubmissionsByFinanceApprover(a.financeSubmissions)})})}]);
"use strict";angular.module("expenseApp.Controllers").controller("HomeController",["$scope","$route","$timeout","$rootScope","$location","$anchorScroll","Application","SubmissionService",function(a,b,c,d,e,f){a.timeOut=!0,a.title="Home",a.employeeRejectedTotal=0,a.managerTotal=0,a.financeTotal=0,a.goToManagerTable=function(){e.hash("manager-short-table"),f()},a.goToFinanceTable=function(){e.hash("finance-short-table"),f()},a.$on("employeeTotal",function(b,c){a.employeeRejectedTotal=c,d.$broadcast("refreshCreateNewItemLoad")}),a.$on("financeTotal",function(b,c){a.financeTotal=c}),a.$on("managerTotal",function(b,c){a.managerTotal=c}),c(function(){a.timeOut=!1},6e3)}]);
"use strict";angular.module("expenseApp.Controllers").controller("LoginController",["$scope","$location","$rootScope","Authentication","LoginService",function(a,b,c,d,e){a.ErrorMessage="",a.doLogin=function(f){e.userlogin(f.username,f.password).then(function(e){e.data.isLoggedIn?(a.ErrorMessage="",d.login(e.data),b.path("/home"),c.$broadcast("refresh"),c.$broadcast("refreshHome")):a.ErrorMessage="The user name and password do not match any records we have.\nPlease try agian, be carefull, too many failed attemps could result in your account being locked."})}}]);
"use strict";angular.module("expenseApp.Controllers").controller("ManagerTableController",["$scope","$location","$modal","$route","$rootScope","$filter","Application","SubmissionService","MessageService","Authentication","ReceiptService",function(a,b,c,d,e,f,g,h,i,j,k){var l=f("orderBy"),m={field:"DateCreated",reverse:!1};a.expanded=!0,a.isManager=j.getIsManager(),a.managerOrder=function(b){b===m.field?(m.reverse=!m.reverse,a.managerSubmissions=l(a.managerSubmissions,m.field,m.reverse)):(m.field=b,m.reverse=!1,a.managerSubmissions=l(a.managerSubmissions,m.field,m.reverse))},a.expandContract=function(b){a.expanded=b},j.getIsManager()&&n();var n=function(){if(void 0!=g.getPendingSubmissionsByManagerName()){a.managerSubmissions=g.getPendingSubmissionsByManagerName(),e.$broadcast("managerTotal",a.managerSubmissions.length);for(var b=0;b<a.managerSubmissions.length;b++){for(var c=[],d=0;d<a.managerSubmissions[b].LineItems.length;d++)for(var f=0;f<a.managerSubmissions[b].LineItems[d].Receipts.length;f++)c.push(a.managerSubmissions[b].LineItems[d].Receipts[f]);a.managerSubmissions[b].allSubmissionReceipts=c}a.managerSubmissions[b].allSubmissionReceipts=c}else h.getPendingSubmissionsByManagerName().then(function(b){for(var c=b.data,d=0;d<c.length;d++){(4==c[d].StatusId||6==c[d].StatusId)&&rejected++;for(var f=[],h=0;h<c[d].LineItems.length;h++)for(var i=0;i<c[d].LineItems[h].Receipts.length;i++)f.push(c[d].LineItems[h].Receipts[i]);c[d].allSubmissionReceipts=f,c[d].ReceiptPresent=f.length>0?!0:!1}b.data.length>0&&g.setPendingSubmissionsByManagerName(c),a.managerSubmissions=c,e.$broadcast("managerTotal",a.managerSubmissions.length)})};a.loadManagerSubmission=function(a,c){g.setSubmission(a),g.setSubmissionStatus(a.Status.StatusId),g.setOrigin("ManagerTable"),g.setSubmissionIndex(c);for(var d=[],e=0;e<a.LineItems.length;e++)if(0!=a.LineItems[e].Receipts.length)for(var f=0;f<a.LineItems[e].Receipts.length;f++)d.push(a.LineItems[e].Receipts[f]);k.setAllReceipts(d),b.path("/submission")},a.deleteSubmission=function(b,d){g.setSubmissionIndex(d),i.setMessage("Are you sure you want to delete this submission?"),i.setBroadCastMessage("confirmManagerDeleteSubmission"),i.setId(b.SubmissionId);c.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController",resolve:{selectedType:function(){return a.selectedType}}})},a.$on("confirmManagerDeleteSubmission",function(){i.setMessage(""),i.setBroadCastMessage(""),h.deleteExpenseReport(i.getId()).then(function(){a.managerSubmissions.splice(g.getSubmissionIndex(),1),g.setPendingSubmissionsByManagerName(a.managerSubmissions)})})}]);
"use strict";angular.module("expenseApp.Controllers").controller("CommentController",["$scope","$modalInstance","$modal","$rootScope","Application","CommentService","MessageService",function(a,b,c,d,e,f,g){var h=e.getCommentIndex();a.comment=e.getComment().ExpenseComment,a.isNewComment=e.getIsNewComment(),a.cancel=function(){b.dismiss("dismiss comment modal"),e.setComment("")},a.save=function(){d.$broadcast("saveComment",a.comment),b.dismiss()},a.deleteComment=function(){g.setMessage("Are you sure you want to delete this comment?"),g.setBroadCastMessage("confirmDeleteComment");c.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController"})},a.$on("confirmDeleteComment",function(){f.DeleteComment(e.getSubmission().Comments[h].CommentId).then(function(){var a=e.getSubmission();a.Comments.splice(h,1),e.setSubmission(a),b.dismiss("dismiss confirm modal")})})}]);
"use strict";angular.module("expenseApp.Controllers").controller("confirmModalController",["$scope","$modalInstance","MessageService","$rootScope",function(a,b,c,d){a.message=c.getMessage(),a.addComment=c.getAddComment(),a.addComment||(a.comment="filler"),a.confirm=function(){d.$broadcast(c.getBroadCastMessage(),a.comment),b.dismiss()},a.cancel=function(){b.dismiss("dismiss confirm modal"),c.setAddComment(!1)}}]);
"use strict";angular.module("expenseApp.Controllers").controller("FormDetailsCtrl",["$scope","$modalInstance","$modal","$rootScope","LineItemService","ValidationService","Application","ReceiptService",function(a,b,c,d,e,f,g,h){function i(a,c){if(0===a.length)console.log(c);else{console.log("Successfully saved report(s)");for(var d=0;d<a.length;d++)delete a[d].valid;b.close(a)}}function j(a,c,d){var e=[];e.push(a),c?(console.log("Successfully saved report(s)"),b.close(e)):console.log(d)}function k(a,c,d){var e=[];e.push(a),c?(console.log("Successfully saved report(s)"),b.close(e)):console.log(d)}function l(a){for(var b=[],c=0;c<a.length;c++){var d={};d.Billable=a[c].billable,d.ExpenseCategoryId=1,d.LineItemAmount=a[c].amount,d.LineItemDate=a[c].date,d.LineItemDesc=a[c].description,d.LineItemMetadata="Miles:"+a[c].miles+",Origin:"+a[c].origin+",Destination:"+a[c].destination+",Sunday:false,Monday:false,Tuesday:false,Wednesday:false,Thursday:false,Friday:false,Saturday:false",d.StatusId=1,d.SubmissionId=e.getSubmissionId(),d.valid=a[c].valid,b.push(d)}return b}a.divShow=!1,a.formTypes=["Mileage","Per Diem","Transportation","Lodging","Parking","Entertainment","Meals","Airfare","Other"],a.mileageArray=[],a.selectedType=e.getExpenseCategoryName(),a.editingLineItem=e.getUnderEdit(),a.addNewReceipt=!1,a.displayMileageForm=function(){return"Mileage"===a.selectedType},a.displayPerDiemForm=function(){return"Per Diem"===a.selectedType},a.displayOtherForm=function(){return a.displayMileageForm()===!1&&a.displayPerDiemForm()===!1},a.resetValues=function(){e.setExpenseCategoryName(a.selectedType)},a.getPolicy=function(){c.open({templateUrl:"Views/HotTowel/views/modals/policyView.html",controller:"PolicyCtrl",resolve:{selectedType:function(){return a.selectedType}}})},a.saveNew=function(){var b=[],c="please create a "+a.selectedType+" expense.";switch(h.setAddReceipt(a.addNewReceipt),a.selectedType){case"Mileage":b=l(a.mileageArray),i(b,c);break;case"Per Diem":j(e.getLineItem(),e.isLineItemValid(),c);break;default:k(e.getLineItem(),e.isLineItemValid(),c)}},a.saveEdit=function(){{var c;"please fix your "+a.selectedType+" expense."}switch(a.selectedType){case"Mileage":c=l(a.mileageArray);break;default:c=e.getLineItem()}e.isLineItemValid()?(console.log("Successfully edited report"),b.close(e.getLineItem())):console.log("invalid expense")},a.cancel=function(){b.dismiss("Form was cancelled.")},a.checkFile=function(){$("#upload").prop("disabled",!0===$("input:file").val()),a.divShow=!1},a.upload=function(){if(a.noReceipt=!1,a.image){var b=a.image.dataURL+"",c=b.substring(b.indexOf(",")+1),f={LineItemId:e.getLineItemId(),Base64String:c,Name:a.image.file.name,Type:a.image.file.type};h.submitReceipt(f).then(function(b){$("#upload").prop("disabled",!0),a.divShow=!0,d.$broadcast("addNewReceipt",b.data),a.image=void 0})}else $("#upload").prop("disabled",!0),a.noReceipt=!0}}]);
"use strict";angular.module("expenseApp.Controllers").controller("MileageCtrl",["$scope","LineItemService","MapQuestService","ValidationService",function(a,b,c,d){function e(){a.mileageValues={date:"",origin:"",destination:"",distance:0,description:"",amount:0,billable:!1,totalMiles:0},f()}function f(){a.mileageValidation={date:{valid:!0,message:"This field is valid."},origin:{valid:!0,message:"This field is valid."},destination:{valid:!0,message:"This field is valid."},miles:{valid:!0,message:"This field is valid."},description:{valid:!0,message:"This field is valid."},validInput:!0}}var g=0;a.calculatingDistance=!1,a.editingExistingMileage=b.getUnderEdit(),a.editingNewMileage=!1,a.mileageValidation={date:{valid:!0,message:"This field is valid."},origin:{valid:!0,message:"This field is valid."},destination:{valid:!0,message:"This field is valid."},miles:{valid:!0,message:"This field is valid."},description:{valid:!0,message:"This field is valid."},validInput:!0},a.mileageValues={date:b.getLineItemDate(),origin:b.getOrigin(),destination:b.getDestination(),miles:b.getMiles(),description:b.getLineItemDesc(),amount:b.getLineItemAmount(),billable:b.getBillable()},a.editMileage=function(b){g=b,a.mileageValues.date=a.mileageArray[g].date,a.mileageValues.origin=a.mileageArray[g].origin,a.mileageValues.destination=a.mileageArray[g].destination,a.mileageValues.miles=a.mileageArray[g].miles,a.mileageValues.description=a.mileageArray[g].description,a.mileageValues.amount=a.mileageArray[g].amount,a.mileageValues.billable=a.mileageArray[g].billable,a.editingNewMileage=!0},a.deleteMileage=function(b){a.editingNewMileage&&g===b&&e(),a.mileageArray.splice(b,1),a.mileageArray.length<=0&&(a.editingNewMileage=!1),g=0},a.getDistance=function(){a.calculatingDistance=!0;var b={from:a.mileageValues.origin,to:a.mileageValues.destination};c.getDistance(b).then(function(b){a.calculatingDistance=!1,0!==b.data.info.statuscode?(a.mileageValidation.miles.valid=!1,a.mileageValidation.miles.message=b.data.info.messages[0]):(a.mileageValues.miles=b.data.route.distance,a.mileageValidation.miles.valid=!0,a.mileageValidation.miles.message="This field is valid.")},function(b){console.log(b),a.calculatingDistance=!1})},a.getAmount=function(){a.mileageValues.amount=.4*a.mileageValues.miles},a.saveAsNewMileage=function(){var b="Miles:"+a.mileageValues.miles+",Origin:"+a.mileageValues.origin+",Destination:"+a.mileageValues.destination+",Sunday:false,Monday:false,Tuesday:false,Wednesday:false,Thursday:false,Friday:false,Saturday:false",f={LineItemDate:a.mileageValues.date,LineItemDesc:a.mileageValues.description,LineItemAmount:a.mileageValues.amount,LineItemMetadata:b},g={location:a.mileageValues.origin},h={location:a.mileageValues.destination};c.getLocation(g).then(function(b){c.getLocation(h).then(function(c){0===b.data.results[0].locations.length?(a.mileageValidation.origin.valid=!1,a.mileageValidation.origin.message="Invalid Origin."):(a.mileageValidation.origin.valid=!0,a.mileageValidation.origin.message="This field is valid."),0===c.data.results[0].locations.length?(a.mileageValidation.destination.valid=!1,a.mileageValidation.destination.message="Invalid Destination."):(a.mileageValidation.destination.valid=!0,a.mileageValidation.destination.message="This field is valid."),a.mileageValidation.origin.valid&&a.mileageValidation.destination.valid&&(a.mileageValidation=d.validateMileage(f),a.mileageValidation.validInput&&(a.mileageValues.valid=a.mileageValidation.validInput,a.mileageArray.push(a.mileageValues),e()))},function(a){console.log(a)})},function(a){console.log(a)})},a.saveChanges=function(){var b="Miles:"+a.mileageValues.miles+",Origin:"+a.mileageValues.origin+",Destination:"+a.mileageValues.destination+",Sunday:false,Monday:false,Tuesday:false,Wednesday:false,Thursday:false,Friday:false,Saturday:false",c={LineItemDate:a.mileageValues.date,LineItemDesc:a.mileageValues.description,LineItemAmount:a.mileageValues.amount,LineItemMetadata:b};a.mileageValidation=d.validateMileage(c),a.mileageValidation.validInput&&(a.mileageArray[g].date=a.mileageValues.date,a.mileageArray[g].origin=a.mileageValues.origin,a.mileageArray[g].destination=a.mileageValues.destination,a.mileageArray[g].distance=a.mileageValues.distance,a.mileageArray[g].description=a.mileageValues.description,a.mileageArray[g].amount=a.mileageValues.amount,a.mileageArray[g].billable=a.mileageValues.billable,e(),a.editingNewMileage=!1)},a.discardChanges=function(){resetValues(),a.editingNewMileage=!1},a.$watch("mileageValues",function(c,e){a.getAmount(),c!==e&&a.editingLineItem&&(b.setLineItemDate(a.mileageValues.date),b.setLineItemDesc(a.mileageValues.description),b.setOrigin(a.mileageValues.origin),b.setDestination(a.mileageValues.destination),b.setMiles(a.mileageValues.miles),b.setLineItemAmount(a.mileageValues.amount),b.setBillable(a.mileageValues.billable),a.mileageValidation=d.validateMileage(b.getLineItem()),a.mileageArray[0]=a.mileageValues,a.mileageArray[0].valid=a.mileageValidation.validInput)},!0),a.today=function(){a.otherValues.date=new Date},a.clear=function(){a.$scope.otherValues.date=null},a.toggleMin=function(){a.minDate=b.getDaysString().sunday},a.toggleMin(),a.toggleMax=function(){a.maxDate=b.getDaysString().saturday},a.toggleMax(),a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.dateOptions={formatYear:"yy",startingDay:1},a.formats=["yyyy/MM/dd","EEEE - MMM. dd/yyyy","dd.MM.yyyy","shortDate"],a.format=a.formats[1]}]);
"use strict";angular.module("expenseApp.Controllers").controller("OtherCtrl",["$scope","LineItemService","ValidationService",function(a,b,c){a.otherValues={date:b.getLineItemDate(),description:b.getLineItemDesc(),amount:b.getLineItemAmount(),billable:b.getBillable()};var d={date:{valid:!0,message:"This field is valid."},description:{valid:!0,message:"This field is valid."},amount:{valid:!0,message:"This field is valid."},validInput:!0};a.isDateValid=function(){return d.date.valid},a.dateValidationMessage=function(){return d.date.message},a.isDescValid=function(){return d.description.valid},a.descValidationMessage=function(){return d.description.message},a.isAmountValid=function(){return d.amount.valid},a.amountValidationMessage=function(){return d.amount.message},a.otherIsValid=function(){return d.validInput},a.updateDate=function(){b.setLineItemDate(a.otherValues.date),d=c.validateOther(b.getLineItem()),b.setValidity(a.otherIsValid())},a.updateDescription=function(){b.setLineItemDesc(a.otherValues.description),d=c.validateOther(b.getLineItem()),a.otherArray[0]=b.getLineItem(),a.otherArray[0].valid=a.otherIsValid()},a.updateAmount=function(){b.setLineItemAmount(a.otherValues.amount),d=c.validateOther(b.getLineItem()),b.setValidity(a.otherIsValid())},a.updateBillable=function(){b.setBillable(a.otherValues.billable)},a.today=function(){a.otherValues.date=new Date},a.clear=function(){a.otherValues.date=null},a.minDate=b.getDaysString().sunday,a.maxDate=b.getDaysString().saturday,a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.dateOptions={formatYear:"yy",startingDay:1},a.formats=["yyyy/MM/dd","EEEE - MMM. dd/yyyy","dd.MM.yyyy","shortDate"],a.format=a.formats[1]}]);
"use strict";angular.module("expenseApp.Controllers").controller("PerDiemCtrl",["$scope","LineItemService","DateService","ValidationService",function(a,b,c,d){a.perDiemValues={daysString:{sunday:b.getDaysString().sunday,monday:b.getDaysString().monday,tuesday:b.getDaysString().tuesday,wednesday:b.getDaysString().wednesday,thursday:b.getDaysString().thursday,friday:b.getDaysString().friday,saturday:b.getDaysString().saturday},lineItemDate:b.getEndingWeek(),days:b.getDays(),billable:b.getBillable(),amount:b.getLineItemAmount()};var e={days:{valid:!0,message:"This field is valid."},validInput:!0};a.areDaysValid=function(){return e.days.valid},a.daysValidationMessage=function(){return e.days.message},a.perDiemIsValid=function(){return e.validInput},a.calculateTotal=function(){var c=30;a.perDiemValues.amount=0;for(var d in a.perDiemValues.days)a.perDiemValues.days.hasOwnProperty(d)&&(a.perDiemValues.amount+=a.perDiemValues.days[d]?c:0);b.setLineItemAmount(a.perDiemValues.amount)},a.updateDays=function(){b.setDays(a.perDiemValues.days),e=d.validatePerDiem(b.getLineItem()),b.setValidity(a.perDiemIsValid())},a.updateBillable=function(){b.setBillable(a.perDiemValues.billable)}}]);
"use strict";angular.module("expenseApp.Controllers").controller("PolicyCtrl",["$scope","$modalInstance","selectedType",function(a,b,c){a.policyType=c,a.policyIs={mileage:"Mileage"===c,perdiem:"Per Diem"===c,transportation:"Transportation"===c,lodging:"Lodging"===c,parking:"Parking"===c,entertainment:"Entertainment"===c,meals:"Meals"===c,airfare:"Airfare"===c,other:"Other"===c},a.ok=function(){b.dismiss("Form was cancelled.")}}]);
"use strict";angular.module("expenseApp.Controllers").controller("receiptController",["$scope","$modalInstance","ReceiptService","$rootScope","MessageService","$modal","Application","$route","LineItemService",function(a,b,c,d,e,f,g,h,i){var j=0,k=0,l=!1;a.canDelete=!0,a.hover=!1,a.userReceipts=c.getReceipts(),a.createNewReceipt=c.getAddReceipt(),c.getShowAllReceipts()&&(l=!0),("ManagerTable"==g.getOrigin()||"FinanceTable"==g.getOrigin())&&(a.canDelete=!1),a.downloadFile=function(a){c.getReceiptById(a)},a.deleteReceipt=function(a,b){j=a,k=b,e.setMessage("Are you sure you want to delete this receipt?"),e.setBroadCastMessage("confirmDeleteReceipt");f.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController"})},a.$on("confirmDeleteReceipt",function(){e.setMessage(""),e.setBroadCastMessage(""),c.deleteReceipt(j,a.userReceipts[k].LineItemId).then(function(){var d=g.getAllUserSubmissions();i.getLineItemsBySubmissionId(g.getSubmission().SubmissionId).then(function(e){a.userReceipts.splice(k,1);var f=e.data;d[g.getSubmissionIndex()].LineItems=f,c.setReceipts(a.userReceipts);for(var h=[],i=0;i<f.length;i++)if(f[i].Receipts.length>0)for(var j=0;j<f[i].Receipts.length;j++)h.push(f[i].Receipts[j]);c.setAllReceipts(h),d[g.getSubmissionIndex()].allSubmissionReceipts=h,0==h.length&&(d[g.getSubmissionIndex()].ReceiptPresent=!1),0==a.userReceipts.length&&b.dismiss("dismiss receipt modal"),g.setAllUserSubmissions(d)})})}),a.checkFile=function(){$("#upload").prop("disabled",!0===$("input:file").val()),a.divShow=!1},a.upload=function(){if(a.noReceipt=!1,a.image){var b=a.image.dataURL+"",e=b.substring(b.indexOf(",")+1),f={LineItemId:i.getLineItemId(),Base64String:e,Name:a.image.file.name,Type:a.image.file.type};c.submitReceipt(f).then(function(b){$("#upload").prop("disabled",!0),a.divShow=!0,d.$broadcast("addNewReceipt",b.data),a.image=void 0})}else $("#upload").prop("disabled",!0),a.noReceipt=!0}}]);
"use strict";angular.module("expenseApp.Controllers").controller("NavController",["$scope","$location","$timeout","Application","$route","$rootScope","Authentication","LoginService","SubmissionService","RepliconProjectService",function(a,b,c,d,e,f,g,h,i,j){a.isLoggedIn=g.exists(),a.$on("refresh",function(){a.isLoggedIn=!0}),a.isActive=function(a){return a===b.path()},a.navToSubmissionPage=function(){d.setSubmission(void 0),e.reload(),b.path("/submission")},a.logout=function(){a.isLoggedIn=!1,g.logout(),d.logout(),b.path("/login"),h.userLogout()},a.syncProjects=function(){a.flag=!0,a.countFrom=0,a.progressValue=0,j.updateRepliconProjects().then(function(){a.progressValue=98,a.flag=!1,f.$broadcast("syncComplete")},function(b){alert(b),a.flag=!1}),a.onTimeout=function(){a.progressValue+=.325,b=c(a.onTimeout,100)};var b=c(a.onTimeout,100);c(function(){c.cancel(b)},28e3)}}]);
"use strict";angular.module("expenseApp.Controllers").controller("SubmissionCtrl",["$scope","$modal","$window","$location","$route","$rootScope","$timeout","LineItemService","SubmissionService","RepliconProjectService","MessageService","DateService","Application","Authentication","ReceiptService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){void 0!==m.getSubmission()&&(a.missingLineItems=m.getSubmission().LineItems.length<1)}function q(){j.getAllRepliconProjects().then(function(b){b.data.length>0?(m.setRepliconProjects(b.data),a.clients=b.data,a.selectedClient=a.clients[0],a.clientManager=a.selectedClient.RepliconManagerName+"@catalystitservices.com",a.loading=!1,a.hasNoProjects=!1):a.hasNoProjects=!0},function(a){console.log(a)})}function r(a){var b={sunday:{},monday:{},tuesday:{},wednesday:{},thursday:{},friday:{},saturday:{}},c=a.split(",");c.forEach(function(a){var c=a.split(":");switch(c[0]){case"Miles":h.setMiles(c[1]);case"Origin":h.setOrigin(c[1]);case"Destination":h.setDestination(c[1]);case"EndingWeek":h.setEndingWeek(new Date(c[1]));case"Sunday":b.sunday="true"===c[1];case"Monday":b.monday="true"===c[1];case"Tuesday":b.tuesday="true"===c[1];case"Wednesday":b.wednesday="true"===c[1];case"Thursday":b.thursday="true"===c[1];case"Friday":b.friday="true"===c[1];case"Saturday":b.saturday="true"===c[1]}}),h.setDays(b)}a.syncComplete=!1,a.flag=!1,a.hasNoProjects=!1,a.clients=[{RepliconProjectName:"Loading..."}],a.loading=!0,a.lineItems=[],a.disabled=!0,a.submission=m.getSubmission(),a.submissionLoad=void 0===m.getSubmission(),a.submissionUnderEdit=h.getUnderEdit(),a.submissionCreated=!1,a.currentDescription="",a.editExistingSubmission=!1,a.receiptsAmount=0;var s,t;m.getSubmission()&&(a.submittedNotApproved=2===m.getSubmissionStatus()&&m.getSubmission().ActiveDirectoryUser.toUpperCase()==n.getUserName().toUpperCase(),a.createNewItemLoad=1==a.submission.StatusId||4==a.submission.StatusId||6==a.submission.StatusId),a.dt1="",a.submissionExists=!1,a.se=function(){return a.submissionExists},a.editComment=function(a){f.$broadcast("editCommentFromSubmission",a)},p(),a.findSpecificSubmission=function(){var b=!1;return a.totalSubmissions.forEach(function(c,d){var e=new Date(c.WeekEndingDate),f=new Date(e.toUTCString().substring(0,16)),g=new Date(a.dt1.toUTCString().substring(0,16));f.valueOf()===g.valueOf()&&c.RepliconProjectId===a.selectedClient.RepliconProjectId&&(b=c,m.setSubmissionIndex(d))}),b},a.clientAndDate=function(){return null!==a.selectedClient&&a.dt1 instanceof Date&&!isNaN(a.dt1.valueOf())?(a.submission=a.findSpecificSubmission(),a.createNewItemLoad=!1,t!==a.dt1&&a.afClient!==a.selectedClient&&f.$broadcast("submissionFound",a.submission),m.setAllUserSubmissions(a.totalSubmissions),a.submission?(a.missingLineItems=a.submission.LineItems.length<1,a.submissionExists=!0,a.createNewItemLoad=1==a.submission.StatusId||4==a.submission.StatusId||6==a.submission.StatusId):(a.currentDescription="",a.submissionExists=!1),s=a.selectedClient,t=a.dt1,!0):!1},a.getSubmissionList=function(){void 0!=m.getAllUserSubmissions()?a.totalSubmissions=m.getAllUserSubmissions():i.getSubmissionsByUsername().then(function(b){for(var c=b.data,d=0;d<c.length;d++){for(var e=[],f=0;f<c[d].LineItems.length;f++)if(0!=c[d].LineItems[f].Receipts.length)for(var g=0;g<c[d].LineItems[f].Receipts.length;g++)e.push(c[d].LineItems[f].Receipts[g]);c[d].allSubmissionReceipts=e,c[d].ReceiptPresent=e.length>0?!0:!1}a.totalSubmissions=c,m.setAllUserSubmissions(c)},function(a){console.log(a)})},a.getSubmissionList(),void 0!=m.getRepliconProjects()?(a.clients=m.getRepliconProjects(),a.selectedClient=a.clients[0],a.clientManager=a.selectedClient.RepliconManagerName+"@catalystitservices.com",a.loading=!1):q(),a.$on("syncComplete",function(){a.syncComplete=!0,q()}),a.createNewSubmission=function(){a.disableCreate=!0;var b={statusId:1,RepliconProjectId:a.selectedClient.RepliconProjectId,WeekEndingDate:a.dt1,ManagerName:a.selectedClient.RepliconManagerName,Description:a.currentDescription};i.submitExpenseReport(b).then(function(b){if(a.submissionCreated=!0,a.submissionId=b.data.SubmissionId,a.submission=b.data,a.getSubmissionList(),h.resetLineItem(),h.setUnderEdit(!1),h.setSubmissionId(b.data.SubmissionId),h.setExpenseCategoryName("Mileage"),h.setEndingWeek(a.dt1),void 0!=m.getAllUserSubmissions())var c=m.getAllUserSubmissions();else var c=a.totalSubmissions;a.submission.RepliconProject=a.selectedClient,a.submission.Status={StatusName:"In Progress"},a.submission.allSubmissionReceipts=[],a.submission.ReceiptPresent=!1,c.push(a.submission),m.setAllUserSubmissions(c),m.setSubmission(a.submission),f.$broadcast("addSubmissionEmployeeTable"),a.openModal()},function(a){console.log(a)})},a.deleteSubmission=function(){k.setMessage("Are you sure you want to delete this submission?"),k.setBroadCastMessage("confirmDeleteSubmissionUnderEdit"),k.setId(a.submission.SubmissionId);b.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController",resolve:{selectedType:function(){return a.selectedType}}})},a.$on("confirmDeleteSubmissionUnderEdit",function(){k.setMessage(""),k.setBroadCastMessage(""),i.deleteExpenseReport(k.getId()).then(function(){c.location.href="/"},function(){})}),a.addNewLineItem=function(){h.resetLineItem(),h.setUnderEdit(!1);var b=a.dt1;a.submission||(a.submission=m.getSubmission(),h.setSubmissionId(a.submission.SubmissionId)),b||(b=new Date(a.submission.WeekEndingDate)),h.setSubmissionId(a.submission.SubmissionId),h.setExpenseCategoryName("Mileage"),h.setEndingWeek(b),a.openModal()},a.editExpenseLine=function(b,c){m.setLineItemIndex(c),h.resetLineItem(),r(b.LineItemMetadata),h.setSubmissionId(b.SubmissionId),h.setLineItemId(b.LineItemId),h.setExpenseCategoryName(b.ExpenseCategory.ExpenseCategoryName),h.setLineItemDate(new Date(b.LineItemDate)),h.setLineItemDesc(b.LineItemDesc),h.setLineItemAmount(b.LineItemAmount),h.setBillable(b.Billable),h.setEndingWeek(a.dt1),h.setUnderEdit(!0),a.openModal()},a.openDetailsView=function(){},a.showAllReceipts=function(){o.setReceipts(o.getAllReceipts()),o.setShowAllReceipts(!0),o.setAddReceipt(!1);b.open({templateUrl:"Views/HotTowel/views/modals/receiptModal.html",controller:"receiptController"})},a.$on("checkReceipts",function(){if(o.getAllReceipts()&&0!=o.getAllReceipts().length)a.receipts=!1;else{for(var b=[],c=0;c<a.submission.LineItems.length;c++)if(0!=a.submission.LineItems[c].Receipts.length)for(var d=0;d<a.submission.LineItems[c].Receipts.length;d++)b.push(a.submission.LineItems[c].Receipts[d]);o.setAllReceipts(b),a.receipts=0!=b.length?!1:!0}a.receiptsAmount=o.getAllReceipts().length}),a.getManager=function(){a.clientManager=a.selectedClient.RepliconManagerName+"@catalystitservices.com"},a.openModal=function(){var c=b.open({templateUrl:"Views/HotTowel/views/modals/formDetailsView.html",controller:"FormDetailsCtrl"});c.result.then(function(c){1==h.getUnderEdit()?(h.updateLineItem(c.LineItemId,c).then(function(b){if(void 0!=m.getAllUserSubmissions())var c=m.getAllUserSubmissions();else var c=a.totalSubmissions;c[m.getSubmissionIndex()].LineItems[m.getLineItemIndex()]=b.data;for(var d=0,e=0;e<c[m.getSubmissionIndex()].LineItems.length;e++)d+=c[m.getSubmissionIndex()].LineItems[e].LineItemAmount;c[m.getSubmissionIndex()].TotalAmount=d,h.resetLineItem()},function(a){console.log(a)}),h.setUnderEdit(!1)):c.forEach(function(c){h.submitLineItem(c).then(function(c){if(void 0!=m.getAllUserSubmissions())var d=m.getAllUserSubmissions();else var d=a.totalSubmissions;a.disableCreate=!1,c.data.ExpenseCategory={ExpenseCategoryName:h.getExpenseCategoryNameById(c.data.ExpenseCategoryId)},d[m.getSubmissionIndex()].LineItems.push(c.data);for(var e=0,f=0;f<d[m.getSubmissionIndex()].LineItems.length;f++)e+=d[m.getSubmissionIndex()].LineItems[f].LineItemAmount;if(d[m.getSubmissionIndex()].TotalAmount=e,a.showComments=!0,h.setLineItemId(c.data.LineItemId),m.setLineItemIndex(d[m.getSubmissionIndex()].LineItems.length-1),o.getAddReceipt()){o.setReceipts(d[m.getSubmissionIndex()].LineItems[m.getLineItemIndex()].Receipts);{b.open({templateUrl:"Views/HotTowel/views/modals/receiptModal.html",controller:"receiptController"})}}else{k.setMessage("Would you like to add a receipt for this line item?"),k.setBroadCastMessage("addReeciptForLineItem");{b.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController"})}}a.$on("addReeciptForLineItem",function(){o.setAddReceipt(!0),o.setReceipts(d[m.getSubmissionIndex()].LineItems[m.getLineItemIndex()].Receipts);b.open({templateUrl:"Views/HotTowel/views/modals/receiptModal.html",controller:"receiptController"})})},function(a){console.log(a)})})},function(b){a.disableCreate=!1,console.log(b)})},a.submitTable=function(){if(a.submission.LineItems.length>0)a.submission.Status.StatusName="Submitted",a.submission.Status.StatusId=2,i.updateSubmission(a.submission.SubmissionId,a.submission).then(function(){var b=m.getAllUserSubmissions();b[m.getSubmissionIndex()]=a.submission,a.dt1="",a.currentDescription="",a.submissionCreated=!1,c.location.reload()},function(a){console.log(a)});else{k.setMessage("You can not submit a table without any expense items"),k.setBroadCastMessage("confirmNoEmptyLineItems"),k.setId(a.submission.SubmissionId);{b.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController",resolve:{selectedType:function(){return a.selectedType}}})}}},a.$on("confirmNoEmptyLineItems",function(){k.setMessage(""),k.setBroadCastMessage(""),e.reload()}),a.unSubmit=function(){a.submission.Status.StatusName="In Progress",a.submission.Status.StatusId=1,i.updateSubmission(a.submission.SubmissionId,a.submission).then(function(){var b=m.getAllUserSubmissions();b[m.getSubmissionIndex()]=a.submission,a.dt1="",a.currentDescription="",a.submissionCreated=!1,c.location.reload()},function(){})},a.saveTable=function(){a.submission.Description=a.currentDescription,a.submission.RepliconProjectId=a.selectedClient.RepliconProjectId,a.submission.WeekEndingDate=a.dt1,a.submission.Status.StatusName="In Progress",a.submission.Status.StatusId=1,i.updateSubmission(a.submission.SubmissionId,a.submission).then(function(){var b=m.getAllUserSubmissions();b[m.getSubmissionIndex()]=a.submission,a.dt1="",a.currentDescription="",a.submissionCreated=!1,c.location.reload()},function(){})},a.$watch("dt1",function(b){if(""!=b&&"string"!=typeof b)if(6===b.getDay())a.dt1=b;else{var c=6-b.getDay(),d=new Date;a.dt1=new Date(d.setDate(b.getDate()+c))}},!0)}]);
"use strict";angular.module("expenseApp.Controllers").controller("submissionTableCtrl",["$scope","$route","$modal","$location","$rootScope","$filter","Application","ReceiptService","LineItemService","MessageService","CommentService","SubmissionService","Authentication",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.receipts=!0;var n=f("orderBy"),o={field:"DateCreated",reverse:!1};a.submissionOrder=function(b){b===o.field?(o.reverse=!o.reverse,a.currentSubmission.LineItems=n(a.currentSubmission.LineItems,o.field,o.reverse)):(o.field=b,o.reverse=!1,a.currentSubmission.LineItems=n(a.currentSubmission.LineItems,o.field,o.reverse))},a.$on("submissionFound",function(b,c){if(h.setAllReceipts([]),g.setOrigin("EmployeeTable"),a.userName=m.getUserName(),c&&(e.$broadcast("checkReceipts"),a.currentDescription=c.Description,a.createNewItemLoad=1==c.StatusId||4==c.StatusId||6==c.StatusId,a.currentSubmission=c,a.isApprover=!1,a.showComments=0!=c.LineItems.length,0!=a.currentSubmission.LineItems.length))for(var d=0;d<a.currentSubmission.Comments.length;d++)a.currentSubmission.Comments[d].commentIsMine=a.currentSubmission.Comments[d].RepliconUserName.toUpperCase()==a.userName.toUpperCase()?!0:!1}),a.$on("confirmDeleteLineItem",function(){j.setMessage(""),j.setBroadCastMessage(""),i.deleteLineItem(j.getId()).then(function(){a.currentSubmission.LineItems.splice(j.getIndex(),1),a.showComments=0!=a.currentSubmission.LineItems.length;for(var b=0,c=g.getAllUserSubmissions(),d=0;d<c[g.getSubmissionIndex()].LineItems.length;d++)b+=c[g.getSubmissionIndex()].LineItems[d].LineItemAmount;c[g.getSubmissionIndex()].TotalAmount=b,g.setSubmissionStatus(c)},function(a){console.log(a)})}),a.confirmLineRemove=function(a,b){j.setMessage("Are you sure you want to delete this line item? NOTE: Any attached receipts will be permanently delete."),j.setBroadCastMessage("confirmDeleteLineItem"),j.setId(a.LineItemId),j.setIndex(b);c.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController"})},a.isApprover=!1,a.createNewItemLoad=1==g.getSubmissionStatus()||4==g.getSubmissionStatus()||6==g.getSubmissionStatus();"EmployeeTable"!==g.getOrigin()&&(a.isApprover=m.getIsManager||m.getIsFinanceApprover?!0:!1),a.userName=m.getUserName();var p;if(a.$on("editCommentFromSubmission",function(b,d){-1!=d?(p=d,g.setComment(a.currentSubmission.Comments[d])):g.setComment("");c.open({templateUrl:"Views/HotTowel/views/modals/commentModal.html",controller:"CommentController"})}),a.editComment=function(b){if(-1!=b){if(g.setIsNewComment(!1),!a.currentSubmission.Comments[b].commentIsMine)return;p=b,g.setComment(a.currentSubmission.Comments[b]),g.setCommentIndex(b)}else g.setIsNewComment(!0),g.setComment("");c.open({templateUrl:"Views/HotTowel/views/modals/commentModal.html",controller:"CommentController"})},a.$on("addNewReceipt",function(b,c){var d=g.getAllUserSubmissions(),f=h.getAllReceipts();f.push(c),h.setAllReceipts(f),d[g.getSubmissionIndex()].allSubmissionReceipts=f,d[g.getSubmissionIndex()].ReceiptPresent=!0,d[g.getSubmissionIndex()].LineItems[g.getLineItemIndex()].ReceiptPresent=!0,d[g.getSubmissionIndex()].LineItems[g.getLineItemIndex()].Receipts.push(c),h.setReceipts(f),g.setAllUserSubmissions(d),a.currentSubmission=d[g.getSubmissionIndex()],e.$broadcast("addSubmissionEmployeeTable")}),g.getSubmission()){a.currentSubmission=g.getSubmission(),a.userName=m.getUserName(),a.showComments=0!=a.currentSubmission.LineItems.length,a.createNewItemLoad=1==a.currentSubmission.StatusId||4==a.currentSubmission.StatusId||6==a.currentSubmission.StatusId,a.dt1=a.currentSubmission.WeekEndingDate,a.currentDescription=a.currentSubmission.Description,(m.getIsFinanceApprover()||m.getIsManager())&&(a.isApprover=!0),e.$broadcast("checkReceipts");for(var q=0;q<g.getRepliconProjects().length;q++)a.currentSubmission.RepliconProject.RepliconProjectName==g.getRepliconProjects()[q].RepliconProjectName&&(a.selectedClient=g.getRepliconProjects()[q]);if(a.editExistingSubmission=!0,0!=a.currentSubmission.LineItems.length)for(var q=0;q<a.currentSubmission.Comments.length;q++)a.currentSubmission.Comments[q].commentIsMine=a.currentSubmission.Comments[q].RepliconUserName.toUpperCase()==a.userName.toUpperCase()?!0:!1}a.approve=function(){j.setAddComment(!1),j.setMessage("Please confirm you are about to approve this submission."),j.setBroadCastMessage("confirmApproveSubmission");c.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController"})},a.reject=function(){j.setMessage("Please confirm you are about to reject this submission."),j.setBroadCastMessage("confirmRejectSubmission"),j.setAddComment(!0);c.open({templateUrl:"Views/HotTowel/views/modals/confirmModal.html",controller:"confirmModalController"})},a.viewReceipts=function(b,d){g.setLineItemId(b),g.setLineItemIndex(d),h.setAddReceipt(!1),h.setShowAllReceipts(!1),h.setReceipts(a.currentSubmission.LineItems[d].Receipts);c.open({templateUrl:"Views/HotTowel/views/modals/receiptModal.html",controller:"receiptController"})},a.$on("refreshCreateNewItemLoad",function(){a.editExistingSubmission=!1}),a.$on("confirmApproveSubmission",function(){var b="";b=a.isApprover&&"ManagerTable"==g.getOrigin()?"Manager Approved":"Finance Approved",a.currentSubmission.Status.StatusName=b,l.updateSubmission(a.currentSubmission.SubmissionId,a.currentSubmission).then(function(){if("Manager Approved"==b){var a=g.getPendingSubmissionsByManagerName();a.splice(g.getSubmissionIndex(),1)}else{var a=g.getPendingSubmissionsByFinanceApprover();a.splice(g.getSubmissionIndex(),1)}g.setPendingSubmissionsByFinanceApprover(a),d.path("/home")})}),a.$on("confirmRejectSubmission",function(b,c){var e="";e=a.isApprover&&"ManagerTable"==g.getOrigin()?"Manager Rejected":"Finance Rejected",a.currentSubmission.Status.StatusName=e,a.currentSubmission.Comments=new Array,a.currentSubmission.Comments[0]={},a.currentSubmission.Comments[0].ExpenseComment=c,l.updateSubmission(a.currentSubmission.SubmissionId,a.currentSubmission).then(function(){if("Manager Rejected"==e){var a=g.getPendingSubmissionsByManagerName();a.splice(g.getSubmissionIndex(),1)}else{var a=g.getPendingSubmissionsByFinanceApprover();a.splice(g.getSubmissionIndex(),1)}d.path("/home")})}),a.$on("saveComment",function(b,c){g.getComment().ExpenseComment?k.PutComment(g.getComment().CommentId,c).then(function(){a.currentSubmission.Comments[p].ExpenseComment=c}):k.CreateComment(a.currentSubmission.SubmissionId,c).then(function(b){b.data.commentIsMine=!0,a.currentSubmission.Comments.push(b.data)})})}]);
"use strict";angular.module("expenseApp").directive("datepickerIcon",[function(){return{restrict:"E",templateUrl:"Views/HotTowel/views/datepicker.html",transclude:!0,controller:"DatepickerCtrl",controllerAs:"picker"}}]);
angular.module("expenseApp").directive("image",["$q",function(a){"use strict";var b=window.URL||window.webkitURL,c=function(){var a="fileupload-resize-area",b=document.getElementById(a);return b||(b=document.createElement("canvas"),b.id=a,b.style.visibility="hidden",document.body.appendChild(b)),b},d=function(a,b){var d=b.resizeMaxHeight||300,e=b.resizeMaxWidth||250,f=b.resizeQuality||.7,g=b.resizeType||"image/jpg",h=c(),i=a.height,j=a.width;j>i?j>e&&(i=Math.round(i*=e/j),j=e):i>d&&(j=Math.round(j*=d/i),i=d),h.width=j,h.height=i;var k=h.getContext("2d");return k.drawImage(a,0,0,j,i),h.toDataURL(g,f)},e=function(a,b){var c=new Image;c.onload=function(){b(c)},c.src=a},f=function(b){var c=a.defer(),d=new FileReader;return d.onload=function(a){c.resolve(a.target.result)},d.readAsDataURL(b),c.promise};return{restrict:"A",scope:{image:"=",resizeMaxHeight:"@?",resizeMaxWidth:"@?",resizeQuality:"@?",resizeType:"@?"},link:function(a,c,g){var h=function(b,c){e(b.url,function(e){var f=d(e,a);b.resized={dataURL:f,type:f.match(/:(.+\/.+);/)[1]},c(b)})},i=function(b){a.$apply(function(){g.multiple?a.image.push(b):a.image=b})};c.bind("change",function(c){g.multiple&&(a.image=[]);for(var d=c.target.files,e=0;e<d.length;e++){var j={file:d[e],url:b.createObjectURL(d[e])};f(d[e]).then(function(a){j.dataURL=a}),a.resizeMaxHeight||a.resizeMaxWidth?h(j,function(a){i(a)}):i(j)}})}}}]);
angular.module("expenseApp").directive("submissionTable",[function(){return{restrict:"E",templateUrl:"Views/HotTowel/views/submissionTable.html",controller:"submissionTableCtrl",controllerAs:"table"}}]);
"use strict";angular.module("expenseApp").directive("submissionPage",[function(){return{restrict:"E",templateUrl:"Views/HotTowel/views/submissionPage.html",transclude:!0,controller:"SubmissionCtrl",controllerAs:"submission"}}]);
"use strict";angular.module("expenseApp.Services").factory("Application",[function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=!1,o=[],p=function(){for(var a=o.length-1;a>=0;a--)o[a]()};return{isReady:function(){return n},makeReady:function(){n=!0,p()},logout:function(){n=!1,a=void 0,b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0},registerListener:function(a){n?a():o.push(a)},setSubmission:function(b){a=b},getSubmission:function(){return a},setAllUserSubmissions:function(a){b=a},getAllUserSubmissions:function(){return b},setSubmissionStatus:function(a){c=a},getSubmissionStatus:function(){return c},setLineItemId:function(a){d=a},getLineItemId:function(){return d},setOrigin:function(a){e=a},getOrigin:function(){return e},setComment:function(a){f=a},getComment:function(){return f},setCommentIndex:function(a){l=a},getCommentIndex:function(){return l},getIsNewComment:function(){return m},setIsNewComment:function(a){m=a},setPendingSubmissionsByManagerName:function(a){g=a},getPendingSubmissionsByManagerName:function(){return g},setPendingSubmissionsByFinanceApprover:function(a){h=a},getPendingSubmissionsByFinanceApprover:function(){return h},setSubmissionIndex:function(a){i=a},getSubmissionIndex:function(){return i},setLineItemIndex:function(a){j=a},getLineItemIndex:function(){return j},setRepliconProjects:function(a){k=a},getRepliconProjects:function(){return k}}}]);
"use strict";angular.module("expenseApp.Services").factory("Authentication",["$q","$http","$timeout","Application",function(a,b,c,d){var e,f,g,h=null;return{requestUser:function(){var d=a.defer();return b.get("/api/user.json").success(function(a){c(function(){a&&(h=a),d.resolve(h)},1e3)}).error(function(a){d.reject(a)}),d.promise},getUser:function(){return h},exists:function(){return null!=h},login:function(a){a&&(h=a.userName,e=a.userName,f=a.isManager,g=a.isFinanceApprover,d.makeReady())},logout:function(){h=void 0,e=void 0,f=void 0,g=void 0},isDeveloper:function(){return this.exists()&&"developer"==h.type},setUserName:function(a){e=a,h=a},getUserName:function(){return e},getIsManager:function(){return f},getIsFinanceApprover:function(){return g}}}]);
"use strict";angular.module("expenseApp.Services").service("CommentService",["$http",function(a){var b=this;b.getCommentById=function(b){return a({method:"GET",url:"/api/Comment",params:{id:b}})},b.getCommentsBySubmissionId=function(){return a({method:"GET",url:"/api/Comment/GetCommentsBySubmissionId"})},b.CreateComment=function(b,c){return a({url:"/api/Comment/CreateComment",method:"POST",params:{submissionId:b,comment:c}})},b.PutComment=function(b,c){return a({url:"/api/Comment/PutComment",method:"PUT",params:{id:b,comment:c}})},b.DeleteComment=function(b){return a({url:"/api/Comment/DeleteComment",method:"DELETE",params:{id:b}})}}]);
"use strict";angular.module("expenseApp.Services").service("DateService",[function(){var a=this;a.getDaysOfThisWeekGivenDate=function(a){var b=new Date(a);b.setDate(b.getDate()-b.getDay());var c=new Date(b);c.setDate(b.getDate()+1);var d=new Date(b);d.setDate(b.getDate()+2);var e=new Date(b);e.setDate(b.getDate()+3);var f=new Date(b);f.setDate(b.getDate()+4);var g=new Date(b);g.setDate(b.getDate()+5);var h=new Date(b);h.setDate(b.getDate()+6);var i={sunday:b,monday:c,tuesday:d,wednesday:e,thursday:f,friday:g,saturday:h};return i}}]);

"use strict";angular.module("expenseApp.Services").service("LineItemService",["$http",function(a){function b(){var a="Miles:"+k.miles+",Origin:"+k.origin+",Destination:"+k.destination+",Sunday:"+k.days.sunday+",Monday:"+k.days.monday+",Tuesday:"+k.days.tuesday+",Wednesday:"+k.days.wednesday+",Thursday:"+k.days.thursday+",Friday:"+k.days.friday+",Saturday:"+k.days.saturday;j.LineItemMetadata=a}function c(a){var b=new Date(a);b.setDate(a.getDate()-a.getDay());var c=new Date(b);c.setDate(b.getDate()+1);var d=new Date(b);d.setDate(b.getDate()+2);var e=new Date(b);e.setDate(b.getDate()+3);var f=new Date(b);f.setDate(b.getDate()+4);var g=new Date(b);g.setDate(b.getDate()+5);var h=new Date(b);h.setDate(b.getDate()+6);var i={sunday:b,monday:c,tuesday:d,wednesday:e,thursday:f,friday:g,saturday:h};return i}function d(){var a=j.LineItemMetadata.split(","),b=a[0].split(":");return b[1]}function e(){var a=j.LineItemMetadata.split(","),b=a[1].split(":");return b[1]}function f(){var a=j.LineItemMetadata.split(","),b=a[2].split(":");return b[1]}function g(){var a=j.LineItemMetadata.split(","),b=a[3].split(":");return k.days.sunday="true"===b[1],b=a[4].split(":"),k.days.monday="true"===b[1],b=a[5].split(":"),k.days.tuesday="true"===b[1],b=a[6].split(":"),k.days.wednesday="true"===b[1],b=a[7].split(":"),k.days.thursday="true"===b[1],b=a[8].split(":"),k.days.friday="true"===b[1],b=a[9].split(":"),k.days.saturday="true"===b[1],k.days}var h=this,i=!1,j={LineItemId:"",SubmissionId:"",Billable:!1,ExpenseCategoryId:1,LineItemDate:"",LineItemDesc:"",LineItemAmount:0,LineItemMetadata:"Miles:0,Origin:,Destination:,Sunday:false,Monday:false,Tuesday:false,Wednesday:false,Thursday:false,Friday:false,Saturday:false",ReceiptPresent:!1,StatusId:1,ManagerApproverDate:null,FinanceApproverDate:null},k={expenseCategoryName:"Mileage",endingWeek:"",origin:"",destination:"",miles:0,days:{sunday:!1,monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1},daysString:{sunday:"",monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:""},valid:!1};h.getUnderEdit=function(){return i},h.setUnderEdit=function(a){i=!!a},h.getLineItemId=function(){return j.LineItemId},h.setLineItemId=function(a){j.LineItemId=isNaN(parseInt(a))?"":a},h.getSubmissionId=function(){return j.SubmissionId},h.setSubmissionId=function(a){j.SubmissionId=isNaN(parseInt(a))?"":a},h.getBillable=function(){return j.Billable},h.setBillable=function(a){j.Billable=!!a},h.getExpenseCategoryId=function(){return j.ExpenseCategoryId},h.setExpenseCategoryId=function(a){j.ExpenseCategoryId=!isNaN(parseInt(a))&&a>=1&&9>=a?a:0},h.getLineItemDate=function(){return j.LineItemDate},h.setLineItemDate=function(a){var b=new Date(a);j.LineItemDate=b instanceof Date&&!isNaN(b.valueOf())?b:""},h.getLineItemDesc=function(){return j.LineItemDesc},h.setLineItemDesc=function(a){j.LineItemDesc=a},h.getLineItemAmount=function(){return j.LineItemAmount},h.setLineItemAmount=function(a){j.LineItemAmount=!isNaN(parseInt(a))&&a>0?a:0},h.getLineItemMetadata=function(){return j.LineItemMetadata},h.getReceiptPresent=function(){return j.ReceiptPresent},h.setReceiptPresent=function(a){j.ReceiptPresent=!!a},h.getStatusId=function(){return j.StatusId},h.setStatusId=function(a){j.StatusId=!isNaN(parseInt(a))&&a>=1&&6>=a&&a%1===0?a:0},h.getExpenseCategoryName=function(){return k.expenseCategoryName},h.setExpenseCategoryName=function(a){switch(a){case"Mileage":k.expenseCategoryName="Mileage",j.ExpenseCategoryId=1;break;case"Per Diem":k.expenseCategoryName="Per Diem",j.ExpenseCategoryId=2;break;case"Transportation":k.expenseCategoryName="Transportation",j.ExpenseCategoryId=3;break;case"Lodging":k.expenseCategoryName="Lodging",j.ExpenseCategoryId=4;break;case"Parking":k.expenseCategoryName="Parking",j.ExpenseCategoryId=5;break;case"Entertainment":k.expenseCategoryName="Entertainment",j.ExpenseCategoryId=6;break;case"Meals":k.expenseCategoryName="Meals",j.ExpenseCategoryId=7;break;case"Airfare":k.expenseCategoryName="Airfare",j.ExpenseCategoryId=8;break;case"Other":k.expenseCategoryName="Other",j.ExpenseCategoryId=9;break;default:k.expenseCategoryName="",j.ExpenseCategoryId=0}},h.getEndingWeek=function(){return k.endingWeek},h.setEndingWeek=function(a){var b=new Date(a);b instanceof Date&&!isNaN(b.valueOf())?(k.endingWeek=b,k.daysString=c(b),j.LineItemDate=b):(k.endingWeek="",k.daysString={sunday:"",monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:""},j.LineItemDate="")},h.getOrigin=function(){return e()},h.setOrigin=function(a){k.origin=a,b()},h.getDestination=function(){return f()},h.setDestination=function(a){k.destination=a,b()},h.getMiles=function(){return parseFloat(d())},h.setMiles=function(a){k.miles=!isNaN(parseInt(a))&&a>=0?a:0,b()},h.getDays=function(){return g()},h.setDays=function(a){"undefined"!=typeof a&&null!==a&&a.hasOwnProperty("sunday")&&a.hasOwnProperty("monday")&&a.hasOwnProperty("tuesday")&&a.hasOwnProperty("wednesday")&&a.hasOwnProperty("thursday")&&a.hasOwnProperty("friday")&&a.hasOwnProperty("saturday")?(k.days.sunday=!!a.sunday,k.days.monday=!!a.monday,k.days.tuesday=!!a.tuesday,k.days.wednesday=!!a.wednesday,k.days.thursday=!!a.thursday,k.days.friday=!!a.friday,k.days.saturday=!!a.saturday):k.days={sunday:!1,monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1},b()},h.isLineItemValid=function(){return k.valid},h.setValidity=function(a){k.valid=!!a},h.getDaysString=function(){return k.daysString},h.getLineItem=function(){return j},h.getExtraData=function(){return k},h.resetLineItem=function(){h.setLineItemDate(""),h.setOrigin(""),h.setDestination(""),h.setMiles(0),h.setLineItemDesc(""),h.setDays({sunday:!1,monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1}),h.setLineItemAmount(0),h.setBillable(!1),h.setValidity(!1)},h.getExpenseCategoryNameById=function(a){var b="";switch(a){case 1:b="Mileage";break;case 2:b="Per Diem";break;case 3:b="Transportation";break;case 4:b="Lodging";break;case 5:b="Parking";break;case 6:b="Entertainment";break;case 7:b="Meals";break;case 8:b="Airfare";break;case 9:b="Other";break;default:b=""}return b},h.getLineItemById=function(b){return a({url:"/api/LineItem",method:"GET",params:{id:b}})},h.getLineItemsBySubmissionId=function(b){return a({url:"/api/LineItem/GetLineItemsBySubmissionId",method:"GET",params:{id:b}})},h.submitLineItem=function(b){return a({url:"/api/LineItem",method:"POST",data:b})},h.updateLineItem=function(b,c){return a({url:"/api/LineItem",method:"PUT",params:{id:b},data:c})},h.deleteLineItem=function(b){return a({url:"/api/LineItem",method:"DELETE",params:{id:b}})}}]);
"use strict";angular.module("expenseApp.Services").service("LoginService",["$http",function(a){var b=this;b.isLoggedIn=function(){return a({url:"/api/login/isLoggedIn",method:"GET"})},b.userlogin=function(b,c){return a({method:"POST",url:"/api/login/userlogin",data:{Username:b,Password:c}})},b.userLogout=function(){return a({method:"POST",url:"/api/login/userLogout"})}}]);
"use strict";angular.module("expenseApp.Services").service("MapQuestService",["$http",function(a){var b=this;b.getDistance=function(b){var c="Fmjtd%7Cluurnu6tn1%2Ca2%3Do5-9wbw0y",d="https://open.mapquestapi.com/directions/v2/route?key=",e=d+c+"&from="+b.from+"&to="+b.to;return a({url:e,method:"GET"})},b.getLocation=function(b){var c="Fmjtd%7Cluurnu6tn1%2Ca2%3Do5-9wbw0y",d="https://open.mapquestapi.com/geocoding/v1/address?key=",e=d+c+"&location="+b.location;return a({url:e,method:"GET"})}}]);
"use strict";angular.module("expenseApp.Services").factory("MessageService",[function(){var a="",b="",c="",d=0,e=!1;return{setMessage:function(b){a=b},getMessage:function(){return a},setBroadCastMessage:function(a){b=a},getBroadCastMessage:function(){return b},getId:function(){return c},setId:function(a){c=a},setIndex:function(a){d=a},getIndex:function(){return d},setAddComment:function(a){e=a},getAddComment:function(){return e}}}]);
angular.module("expenseApp.Services").service("NavService",[function(){var a;return{getTitle:function(){return a},setTitle:function(a){this.title=a}}}]);
"use strict";angular.module("expenseApp.Services").service("ReceiptService",["$http",function(a){var b,c,d,e,f=this;f.getReceipts=function(){return b},f.setReceipts=function(a){b=a},f.getShowAllReceipts=function(){return e},f.setShowAllReceipts=function(a){e=a},f.getAllReceipts=function(){return d},f.setAllReceipts=function(a){d=a},f.getAddReceipt=function(){return c},f.setAddReceipt=function(a){c=a},f.getReceiptById=function(b){return a({method:"GET",url:"/api/Receipts",params:{id:b}})},f.GetReceiptsBySubmissionId=function(b){return a({method:"GET",url:"/api/Receipt/GetReceiptsBySubmissionId",params:{id:b}})},f.GetReceiptsWithImageBySubmissionId=function(b){return a({method:"GET",url:"/api/Receipt/GetReceiptsWithImageBySubmissionId",params:{id:b}})},f.submitReceipt=function(b){return a({method:"POST",url:"/api/Receipts",data:b})},f.deleteReceipt=function(b,c){return a({method:"DELETE",url:"/api/Receipts",params:{id:b,lineItemId:c}})}}]);
"use strict";angular.module("expenseApp.Services").service("RepliconProjectService",["$http",function(a){var b=this;b.getAllRepliconProjects=function(b){return a({method:"GET",url:"/api/RepliconProject",params:b})},b.updateRepliconProjects=function(){return a({method:"POST",url:"/api/RepliconProject/UpdateRepliconProjectTable"})}}]);
"use strict";angular.module("expenseApp.Services").factory("RouteFilter",["$location",function(a){var b=[],c=function(a){for(var c=b.length-1;c>=0;c--)for(var e=b[c].routes.length-1;e>=0;e--)if(d(b[c].routes[e],a))return b[c]},d=function(a,b){return b instanceof RegExp?b.test(a):b===a};return{canAccess:function(a){var b=c(a);return b.callback()},register:function(a,c,d,e){e="undefined"!=typeof e?e:null,b.push({name:a,routes:c,callback:d,redirectUrl:e})},run:function(b){var d=c(b);null!=d&&null!=d.redirectUrl&&(d.callback()||a.path(d.redirectUrl))}}}]);
"use strict";angular.module("expenseApp.Services").service("SubmissionService",["$http","Application",function(a){var b=this;b.getSubmissionsByUsername=function(){return a({method:"GET",url:"/api/Submissions",async:!1})},b.getPendingSubmissionsByManagerName=function(){return a({method:"GET",url:"/api/Submission/GetPendingSubmissionsByManagerName"})},b.getPendingSubmissionsByFinanceApprover=function(){return a({method:"GET",url:"/api/Submission/GetPendingSubmissionsByFinanceApprover"})},b.submitExpenseReport=function(b){return a({url:"/api/Submission",method:"POST",data:b})},b.updateSubmission=function(b,c){return delete c.Receipts,a({method:"PUT",url:"/api/Submissions",params:{id:b},data:c})},b.deleteExpenseReport=function(b){return a({url:"/api/Submissions",method:"DELETE",params:{id:b}})}}]);
"use strict";angular.module("expenseApp.Services").service("ValidationService",[function(){function a(a){var b=a.LineItemMetadata.split(","),c=b[0].split(":");return parseInt(c[1])}function b(a){var b=a.LineItemMetadata.split(","),c=b[1].split(":");return c[1]}function c(a){var b=a.LineItemMetadata.split(","),c=b[2].split(":");return c[1]}function d(a){var b=a.LineItemMetadata.split(","),c=b[3].split(":"),d={};return d.sunday="true"===c[1],c=b[4].split(":"),d.monday="true"===c[1],c=b[5].split(":"),d.tuesday="true"===c[1],c=b[6].split(":"),d.wednesday="true"===c[1],c=b[7].split(":"),d.thursday="true"===c[1],c=b[8].split(":"),d.friday="true"===c[1],c=b[9].split(":"),d.saturday="true"===c[1],d}var e=this,f={};e.validateMileage=function(d){var e={origin:b(d),destination:c(d),miles:a(d)};f={validInput:!1,date:{valid:!0,message:"This field is valid."},origin:{valid:!0,message:"This field is valid."},destination:{valid:!0,message:"This field is valid."},miles:{valid:!0,message:"This field is valid."},description:{valid:!0,message:"This field is valid."},amount:{valid:!0,message:"This field is valid."}},f.date.valid=d.LineItemDate instanceof Date&&!isNaN(d.LineItemDate.valueOf()),f.date.valid||(f.date.message=""===d.LineItemDate?"Please provide a date.":"Invalid date."),f.origin.valid=e.origin.length>0,f.origin.valid||(f.origin.message="Please input an origin."),f.destination.valid=e.destination.length>0,f.destination.valid||(f.destination.message="Please input a destination.");var g=/^(\d*.?\d+)$/;return f.miles.valid=g.test(e.miles)&&e.miles>0,f.miles.valid||(f.miles.message="Please input a valid distance."),f.description.valid=d.LineItemDesc.length>0,f.description.valid||(f.description.message="Please input a description."),f.amount.valid=g.test(d.LineItemAmount)&&d.LineItemAmount>=0,f.amount.valid||(f.amount.message="Please input a valid amount."),f.validInput=f.date.valid&&f.origin.valid&&f.destination.valid&&f.miles.valid&&f.description.valid&&f.amount.valid,f},e.validatePerDiem=function(a){var b={days:d(a)};return f={validInput:!0,days:{valid:!0,message:"This field is valid."}},f.days.valid=b.days.sunday||b.days.monday||b.days.tuesday||b.days.wednesday||b.days.thursday||b.days.friday||b.days.saturday,f.days.valid||(f.days.message="Please select at least one day."),f.validInput=f.days.valid,f},e.validateOther=function(a){f={validInput:!0,date:{valid:!0,message:"This field is valid."},description:{valid:!0,message:"This field is valid."},amount:{valid:!0,message:"This field is valid."}},f.date.valid=a.LineItemDate instanceof Date&&!isNaN(a.LineItemDate.valueOf()),f.date.valid||(f.date.message=""===a.LineItemDate?"Please provide a date.":"Invalid date."),f.description.valid=a.LineItemDesc.length>0,f.description.valid||(f.description.message="Please input a description.");var b=/^(\d*.?\d+)$/;return f.amount.valid=b.test(a.LineItemAmount)&&a.LineItemAmount>=0,f.amount.valid||(f.amount.message="Please input a valid amount."),f.validInput=f.date.valid&&f.description.valid&&f.amount.valid,f}}]);